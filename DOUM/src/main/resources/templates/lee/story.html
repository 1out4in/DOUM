<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>story</title>


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" th:href="@{/css/lee/story(others).css}" />
    <link rel="stylesheet" th:href="@{/css/lee/comment.css}">

<!--    <link rel="stylesheet" th:href="@{/css/lee/detail.css}" />-->
<style>

</style>
</head>

<body>
<div class="modal">
    <div class="modal-content" >

        <div class="modal-left">
            <div class="slider">
                <div class="slides">
                    <div th:if="${storyImg != null}">
                        <div th:each="image : ${storyImg}">
                            <img th:src="@{${image.fileLocation}}" alt="게시물 이미지">
                        </div>
                    </div>
                </div>

<!--                    <img src="https://cdn.hankyung.com/photo/201905/20190513180013_5cd9321ddf1ec_1.jpg" alt="게시물 이미지">-->
<!--                    <img src="https://cdn.hankyung.com/photo/201905/20190513180014_5cd9321ddf1ec_2.jpg" alt="게시물 이미지">-->
<!--                    <img src="https://cdn.hankyung.com/photo/201905/20190513180015_5cd9321ddf1ec_3.jpg" alt="게시물 이미지">-->
                </div>
                <a class="prev" onclick="changeSlide(-1)">&#10094;</a>
                <a class="next" onclick="changeSlide(1)">&#10095;</a>
            </div>
        </div>
        <div class="modal-right">


            <div class="post-description">

                <div class="mb-3">
<!--                    나중에 hidden 할듯 -->
                    <div  class="form-label"></div>
                    <label>
                        <input class="input-hidden" type="text" name="storyId" th:value="*{storyId}" readonly/>
                    </label>
                </div>



                <a style="color: black; font-weight: bold;" th:text="${story.title}" href=""></a>
                <span style="color: #a4a1a1; font-size: x-small;" th:text="'조회수' + ${story.views}"></span>
                <p th:text="${story.content}"></p>

            </div>

            <div class="likes-section">
<!--                <p><i class="like-icon far fa-heart"></i> <strong>50</strong></p>-->
<!--                <p><i class="like-icon far fa-heart"></i> <strong><span th:text="${like}"></span></strong></p>-->
            </div>
            <h3>댓글</h3>




            <div class="comment-list">
                <!-- 댓글 목록이 여기에 표시됩니다. -->
            </div>

            <div class="comment-form">
                <textarea id="commentContent" placeholder="댓글을 입력하세요..."></textarea>
                <button type="button"  onclick="addStoryComment()" >댓글 달기</button>
            </div>


            <input type="hidden" name="userId" value="1">
            <input type="hidden" name="storyId" th:value="${story.storyId}">







            <input type="hidden" name="userId" value="1">

<!--            <input type="hidden" name="userId" th:value="${}">-->

            <div class="edit-delete-buttons">
                <button onclick="editPost()">수정</button>
                <button onclick="deletePost()">삭제</button>
            </div>
        </div>
    </div>


<div class="comment-options-modal" id="commentOptionsModal">
    <div class="comment-options-content">
        <button class="delete-button">삭제</button>
        <button class="cancel-button">취소</button>
    </div>
</div>

<div class="comment-options-modal" id="commentReportModal">
    <div class="comment-options-content">
        <button class="report-button">신고</button>
        <button class="cancel-button">취소</button>
    </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script th:src="@{/js/lee/story.js}"></script>

<script>
    let slideIndex = 0;

    function showSlides() {
        const slides = document.querySelectorAll('.slides img');
        slides.forEach((slide, index) => {
            slide.style.display = index === slideIndex ? 'block' : 'none';
        });
    }

    function changeSlide(n) {
        const slides = document.querySelectorAll('.slides img');
        slideIndex = (slideIndex + n + slides.length) % slides.length;
        showSlides();
    }

    document.addEventListener('DOMContentLoaded', () => {
        showSlides();

        // 댓글 옵션 버튼 이벤트
        const optionButtons = document.querySelectorAll('.comment-options .fa-ellipsis-v');
        const deleteModal = document.getElementById('commentOptionsModal');
        const reportModal = document.getElementById('commentReportModal');
        const deleteButton = document.querySelector('.delete-button');
        const reportButton = document.querySelector('.report-button');
        const cancelButtons = document.querySelectorAll('.cancel-button');

        optionButtons.forEach((button, index) => {
            button.addEventListener('click', () => {
                if (index === optionButtons.length - 1) {
                    reportModal.style.display = 'flex';
                } else {
                    deleteModal.style.display = 'flex';
                }
            });
        });

        cancelButtons.forEach(button => {
            button.addEventListener('click', () => {
                deleteModal.style.display = 'none';
                reportModal.style.display = 'none';
            });
        });

        deleteButton.addEventListener('click', () => {
            alert('댓글이 삭제되었습니다.');
            deleteModal.style.display = 'none';
        });

        reportButton.addEventListener('click', () => {
            alert('댓글이 신고되었습니다.');
            reportModal.style.display = 'none';
        });

        // 모달 외부 클릭 시 닫기
        window.addEventListener('click', (event) => {
            if (event.target === deleteModal) {
                deleteModal.style.display = 'none';
            }
            if (event.target === reportModal) {
                reportModal.style.display = 'none';
            }
        });
    });



</script>
<!--<script src=""></script>-->
</body>


</html>